{"data":{"site":{"siteMetadata":{"title":"About web performance and sites with energy low.","author":"Dmitry Schegolihin"}},"markdownRemark":{"id":"dd9d6a1f-084d-5aa6-9f2d-037f27b7d250","excerpt":"In the .env file set the value of   to the   of a running Magento instance. For my case is the  . Then execute: See some validation errors…","html":"<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/d8d0035195e477529d93999bd9626e37/d47ca/venia-home.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 69.86666666666666%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAIAAACgpqunAAAACXBIWXMAAAsSAAALEgHS3X78AAAB/0lEQVQoz6VSy27TQBT1x7DlB9iBWPADdMOGBQt2RbxUseAt+gOVCiUCEURQgTYqojQLZBBCpoSIughFNKrrxG9PHCd+zTiOJ+b6IZPCBomj0eje43PujO8dBmM8yhAcgh8Q4mmSr4oQFJTvDwYD2A3DGA6HwDBxHPM832w2oyia8fp4EtsfX/c3qziapCnGrutyHKfruiAILMuCngHWz4AzhGE4Ho/TPYpCzyEjOw0yEuB5HiihOFyBEMJMDwM+OI4DCtdxoBIs+CNIgYSTkyTJZXnAJDOglCJkiqKIEJIkCWJVlWVZ0jSt2+3qhj4tvNNcX5jL/F/wpxmIESZ7nT3T0HKiP+wtPblaqV9GtpAzne62rO9aphAGbm5h8jIdBb3hxc8fGq0mh9wAmMWVc2evHD09f+TVVhXSXu/H8tO5trjKsQ923tVTL6UMzcyt9v5KbfX7t+0vjdrBT35C44t3T126cXz+5snFewsUBF8b1+8cW3t/YW392lZ1qTDnJ9tI36jcZtcffnr7wncsYHbaG8vP5249PrHZeAYpDOFlfeFR7cz9yvldvpV393e3secgeR8HQdkSb2SYqFO2JySebR6ExCkthRkHWFEUa2DDA4InkTbM6iuqipAFE87LwZNSVM31vL+6Def4PsyUYFLOg9JilZo4prMpk/wHfgFvzQGJX7DfTAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"Venia Home\"\n        title=\"\"\n        src=\"/static/d8d0035195e477529d93999bd9626e37/fb8a0/venia-home.png\"\n        srcset=\"/static/d8d0035195e477529d93999bd9626e37/1a291/venia-home.png 148w,\n/static/d8d0035195e477529d93999bd9626e37/2bc4a/venia-home.png 295w,\n/static/d8d0035195e477529d93999bd9626e37/fb8a0/venia-home.png 590w,\n/static/d8d0035195e477529d93999bd9626e37/d47ca/venia-home.png 750w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">git clone https://github.com/magento-research/pwa-studio.git\ncd pwa-studio\nnpm install\ncp packages/venia-concept/.env.dist packages/venia-concept/.env</code></pre></div>\n<p>In the .env file set the value of <code class=\"language-text\">MAGENTO_BACKEND_URL</code> to the <code class=\"language-text\">URL</code> of a running Magento instance. For my case is the <code class=\"language-text\">http://m230.test/</code>.</p>\n<p>Then execute:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">npm run build</code></pre></div>\n<p>See some validation errors:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">Cannot validate queries because the configured Magento backend http://m230.test/ disallows introspection in &quot;production&quot; mode. If you can do so, set this Magento instance to &quot;developer&quot; mode.\n\nThe introspection query to http://m230.test/graphql failed with the following errors:\n\t- GraphQL introspection is not allowed, but the query contained __schema or __type\n\t- Max query depth should be 10 but got 11.\n\nThe current default backend for Venia development is:\n\n\thttps://release-dev-rxvv2iq-zddsyhrdimyra.us-4.magentosite.cloud/\n\nThe configured MAGENTO_BACKEND_URL in the current environment is\n\n\thttp://m230.test/\n\nConsider updating your .env file or environment variables to resolve the reported issues.</code></pre></div>\n<p>Setup the <code class=\"language-text\">developer mode</code> for your magento instance:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">bin/magento deploy:mode:set developer</code></pre></div>\n<p>After setup the <code class=\"language-text\">developer</code> mode we try to again execute build:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">npm run build</code></pre></div>\n<p>See another errors:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">/Users/sportmage/workspace/pwa-studio/packages/venia-concept/src/queries/getProductDetail.graphql\n  37:25  error  Cannot query field &quot;fashion_color&quot; on type &quot;SimpleProduct&quot;  graphql/template-strings\n\n/Users/sportmage/workspace/pwa-studio/packages/venia-concept/src/RootComponents/Product/Product.js\n  48:29  error  Cannot query field &quot;fashion_color&quot; on type &quot;SimpleProduct&quot;  graphql/template-strings\n\n✖ 2 problems (2 errors, 0 warnings)\n\n\n  These errors may indicate:\n  -  an out-of-date Magento 2.3 codebase running at &quot;http://m230.test/&quot;\n  -  an out-of-date project codebase whose queries need updating\n\nUse GraphiQL or another schema exploration tool on the Magento store to learn more.</code></pre></div>\n<p>This happens because you’re running against a Magento instance that has no Venia sample data and because the Venia GraphQL queries for product options <code class=\"language-text\">fashion_color</code> and <code class=\"language-text\">fashion_size</code> are hardcoded.\nRelated <a href=\"https://github.com/magento-research/pwa-studio/issues/626\">issue</a></p>\n<p>For fixed need to install the <code class=\"language-text\">Venia sample data</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">chmod +x pwa-studio/packages/venia-concept/deployVeniaSampleData.sh</code></pre></div>\n<p>Then execute the <code class=\"language-text\">setup:upgrade</code> for your magento instance:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">bin/magento setup:upgrade</code></pre></div>\n<p>Upd:\nAnd i am have <a href=\"https://github.com/magento-research/pwa-studio/issues/561\">issue</a> with setup on stage with <code class=\"language-text\">Docker</code>:</p>\n<p>For fix need install additionally <code class=\"language-text\">envalid</code> package before <code class=\"language-text\">npm run build</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">npm install envalid</code></pre></div>","frontmatter":{"title":"PWA Studio - installation the Venia theme concept.","date":"January 06, 2019"}}},"pageContext":{"slug":"/m2-pwa-venia-install/","previous":{"fields":{"slug":"/m2-fixtures/"},"frontmatter":{"title":"Performance profiles instead full sample data"}},"next":{"fields":{"slug":"/elk-stack-setup/"},"frontmatter":{"title":"ELK stack setup via udp protocol"}}}}